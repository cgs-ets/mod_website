define(["core/log"],function(t){"use strict";function e(){}return e.prototype.main=function(){for(var t=this,e=document.querySelectorAll(".nested-sortable.list-move"),i=0;i<e.length;i++)new Sortable(e[i],{group:{name:"nestedmenu",pull:!0},animation:150,fallbackOnBody:!0,swapThreshold:.65,ghostClass:"reordering",onStart:t.SortStart,onEnd:t.SortEnd});for(var n=document.querySelectorAll(".nested-sortable.list-clone"),i=0;i<n.length;i++)new Sortable(n[i],{group:{name:"nestedmenu",pull:"clone"},animation:150,fallbackOnBody:!0,swapThreshold:.65,ghostClass:"reordering",onStart:t.SortStart,onEnd:t.SortEnd})},e.prototype.SortStart=function(t){document.querySelector(".active .menu-list").classList.add("sorting")},e.prototype.SortEnd=function(t){var e,i,n=document.querySelector(".active .menu-list"),a=(n.classList.remove("sorting"),t.from.classList.contains("list-all")&&t.to.classList.contains("list-active")&&document.querySelectorAll('.inactive .list-group-item[data-pageid="'+t.item.dataset.pageid+'"]').length&&document.querySelector('.inactive .list-group-item[data-pageid="'+t.item.dataset.pageid+'"]').remove(),t.from.classList.contains("list-active")&&t.to.classList.contains("list-all")&&((e=document.querySelectorAll('.active .list-group-item[data-pageid="'+t.item.dataset.pageid+'"]').length)&&t.item.remove(),i=document.querySelectorAll('.inactive .list-group-item[data-pageid="'+t.item.dataset.pageid+'"]').length,e||i||document.querySelector(".inactive .menu-list").appendChild(t.item)),t.from.classList.contains("list-active")&&t.to.classList.contains("list-inactive")&&document.querySelectorAll('.active .list-group-item[data-pageid="'+t.item.dataset.pageid+'"]').length&&t.item.remove(),t.from.classList.contains("list-inactive")&&t.to.classList.contains("list-all")&&document.querySelector(".inactive .menu-list").appendChild(t.item),t.from.classList.contains("list-all")&&t.to.classList.contains("list-inactive")&&t.item.remove(),[]);for(const s of n.children){var o=[];for(const l of s.querySelectorAll(".list-group-item"))o.push({id:l.dataset.pageid});a.push({id:s.dataset.pageid,children:o})}document.querySelector('input[name="menujson"]').value=JSON.stringify(a)},{init:function(){t.debug("mod_website/editmenu: initializing"),(new e).main()}}});